Форматы файлов спутниковых данных

1. Формат паспорта
Паспорта файлов имеют одинаковую длину (512 байт). 
Паспорт состоит из двух частей: постоянной (первые 64 байта паспорта) 
и специфической (остаток паспорта). 
Постоянная часть одинакова для всех типов файлов, 
специфическая же определяется типом данных указанным в постоянной части:

Постоянная часть

смещение
        размер
        		тип (Си)
0       1       byte	        Тип формата - FFh1	
1       3       char[13]        Название ИСЗ2, заглавными буквами (см. Примечание 1).	
14      4       unsigned long	Идентификатор ИСЗ (см. Таблицу "Идентификаторы ИСЗ")
18      4       unsigned long	Номер витка	
22      2       unsigned        дата начала приема (UTC) --- год
24      2       unsigned                           день года (1-based)	
26      4       unsigned long                      время начала приема 
                                                   (миллисекунд с начала дня)
30-37   8	 	                     Резерв	
38-59   22	 	                     Служебные	
60-61   2	 	                     Резерв	
62	2	byte[2]	Тип данных (см. Таблицу "Поле 62/Поле 63")	


Идентификаторы ИСЗ	
NOAA-9   15427
NOAA-10  16969
NOAA-11  19531
NOAA-12  21263
NOAA-14  23455
NOAA-15  25338
NOAA-16  26536
NOAA-17  27453
GMS-5    23522

	Тип данных задается полями по смещениям 62 и 63:
Поле 62                   Поле 63	
1   исходные данные       1        HRPT NOAA
                          11       GMS S-VISSR
2   одноканальные данные  1	       NOAA AVHRR
                          11       GMS S-VISSR
3   проекция              1	       NOAA AVHRR
                          11       GMS S-VISSR
4   данные телеметрии     1        NOAA/AVHRR
                          11       GMS S-VISSR (данные из DOC-сектора)



2. Специфические части паспорта
2.1 HRPT
64	2	unsigned	Количество принятых кадров без сбоя синхронизации		
66	2	unsigned	Количество принятых кадров со сбоем синхронизации	
68	2	unsigned	Количество кадров без сбоев по полю времени
70	2	unsigned	Количество кадров со сбоем по полю времени
72	2	unsigned	Количество пропусков (gaps)
Описание строки					
74	2	unsigned	Тип упаковки:	0 - одно 10 битовое слово	
                    ▐ 2 байта 	1 - три 10 битовых слова	
                    ▐ 4 байта 	2 - восемь 10 битовых слов	
                    ▐ 10 байт		
76	2	unsigned	Полная длина строки		
78	4	unsigned long	Маска сегментов кадра HRPT		
82	2	unsigned	Количество пикселов, пропущенных от начала строки		
84	2	unsigned	Количество принятых пикселов строки		
86	2	unsigned	Тип витка: 0 - нисходящий, 1 - восходящий		
88-127	40	 	Резерв

Орбитальные данные NORAD
128	4	unsigned long	Номер опорного витка (полный)		
132	2	unsigned	Номер набора элементов		
134	2	unsigned	Тип эфемерид		
136	2	unsigned	Год (полный)	Опорного витка	
138	8	double	День от начала года (1-based)		
146	8	double	Среднее движение (рад/мин)		
154	8	double	Сопротивление атмосферы (BSTAR Drag Term)		
162	8	double	Наклонение орбиты (рад)		
170	8	double 	Прямое восхождение восходящего узла (рад)		
178	8	double	Эксцентриситет		
186	8	double	Аргумент перигея (рад)		
194	8	double	Средняя аномалия (рад)		
202-255	54	 	                     Резерв

Данные географической коррекции
256	2	unsigned	Номер версии коррекции, 0 - отсутствие коррекции		
258	2	int	Поправка бортовых часов по TBUS, мсек	Версия 1	
260	2	int	Поправка времени, мсек		
262	8	double	Негоризонтальн. платформы ИСЗ (рад) - крен (roll)		
270	8	double	- тангаж (pitch)		
278	8	double	- рысканье (yaw)		
286-511	226		Резерв		

2.2 Одноканальные данные
2.2.1 Одноканальные данные NOAA AVHRR
Одноканальные данные NOAA AVHRR				
64	4	unsigned long	Стадия обработки данных. Биты: 0 - проведена калибровка 1 - проведена атмосферная коррекция 16 - проведено отсечение суши 17 - проведено отсечение моря	
68	2	unsigned	Номер канала. Возможные значения: 1, 2, 3, 4, 5.	
70	2	unsigned	Общее количество строк.	
72	2	unsigned	Полная длина строки в пикселах.	
74	2	unsigned	Количество пикселов, пропущенных от начала строки	
76	2	unsigned	Количество принятых пикселов строки	
78	2	unsigned	Тип витка: 0 - нисходящий, 1 - восходящий	
80	2	int	        Максимальное значение среди значимых пикселов изображения
                    (коэффициенты пересчета значения -> температура/альбедо) 
                    T = A * C + B
82	8	double	Коэффициент A	
90	8	double	Коэффициент B	
98-127	30		Резерв	
Орбитальные данные NORAD				
128	4	unsigned long	Номер опорного витка (полный)	
132	2	unsigned	Номер набора элементов	
134	2	unsigned	Тип эфемерид	
136	2	unsigned	Год (полный)	
138	8	double	День от начала года (1-based)	
146	8	double	Среднее движение (рад/мин)	
154	8	double	Сопротивление атмосферы (BSTAR Drag Term)	
162	8	double	Наклонение орбиты (рад)	
170	8	double 	Прямое восхождение восходящего узла (рад)	
178	8	double	Эксцентриситет	
186	8	double	Аргумент перигея (рад)	
194	8	double	Средняя аномалия (рад)	
202-255	54		Резерв	
Коррекция				
256	2	unsigned	Номер версии коррекции, 0 - отсутствие коррекции	
258	2	int	Поправка бортовых часов по TBUS, мсек	Версия 1
260	2	int	Поправка времени, мсек	
262	8	double	крен (roll)	
270	8	double	тангаж (pitch)	
278	8	double	рысканье (yaw)	
286-511	226		Резерв	

2.3 Проекции
Проекции				
64	4	unsigned long	Стадия обработки данных. 
        Биты: 
         0 - проведена калибровка 
         1 - проведена атмосферная коррекция 
        16 - проведено отсечение суши 
        17 - проведено отсечение моря	
68	2	unsigned	Номер канала. Возможные значения: 1, 2, 3, 4, 5.	
70	2	int	Максимальное значение среди значимых пикселов изображения	
Описание географического района				
72	2	unsigned	Тип проекции: 1 - меркаторская, 2 - равнопромежуточная	
74	2	unsigned	Количество строк	
76	2	unsigned	Количество пикселов в строке	
78	4	float	Широта (градусы)	
82	4	float	Долгота (градусы)	
86	4	float	Размер по широте (градусы)	
90	4	float	Размер по долготе (градусы)	
94	4	float	Шаг по широте (секунды)	
98	4	float	Шаг по долготе (секунды)	
Параметры преобразования к физическим величинам				
102	8	double	Коэффициент A	
110	8	double	Коэффициент B	
118-128	10		Резерв	
Орбитальные данные NORAD				
128	4	unsigned long	Номер опорного витка (полный)	
132	2	unsigned	Номер набора элементов	
134	2	unsigned	Тип эфемерид	
136	2	unsigned	Год (полный)	
138	8	double	День от начала года (1-based)	
146	8	double	Среднее движение (рад/мин)	
154	8	double	Сопротивление атмосферы (BSTAR Drag Term)	
162	8	double	Наклонение орбиты (рад)	
170	8	double 	Прямое восхождение восходящего узла (рад)	
178	8	double	Эксцентриситет	
186	8	double	Аргумент перигея (рад)	
194	8	double	Средняя аномалия (рад)	
202-255	54		Резерв	
Коррекция				
256	2	unsigned	Номер версии коррекции, 0 - отсутствие коррекции	
258	2	int	Поправка бортовых часов по TBUS, мсек	
260	2	int	Поправка времени, мсек	
262	8	double	крен (roll)	
270	8	double	тангаж (pitch)	
278	8	double	рысканье (yaw)	
286-511	226		Резерв	


2.4 Данные телеметрии канала AVHRR NOAA HRPT

Данные телеметрии канала AVHRR NOAA HRPT			
64	2	unsigned	Общее количество строк.
66	2	unsigned	Номер канала. Возможные значения: 1, 2, 3, 4, 5.
68-511	444		Резерв





Примечание 1.
До начала 2000 года поле satName описывалось как char satName[15], 
а по смещению 16 располагалось поле unsigned short satNum. 
На тот момент в архиве были файлы данных только спутников NOAA 
(до NOAA-15 включительно), поэтому поле satName содержало 
ASCIIZ-строку "NOAA", а поле satNum - номер спутника в серии, 
т.е. для NOAA-12 оно содержало 12.
В настоящий момент поле satName описывается как char satName[13] 
и для спутников NOAA содержит ASCIIZ-строку вида "NOAA 12", 
а по смещению 14 расположено поле unsigned long satId.